<script>
    $(document).ready(function(){
        $("#book-carousel").owlCarousel({
            responsiveClass:true,
            margin:25,
            nav: true,
            dots: false,
            responsive:{
                0:{
                    items:2
                },
                480:{
                    items:6
                }
            }
        })
    })

    $(function(){
        $("#add_to_cart").click(function(){
            let data = {
                "guid": "{{book.guid}}"
            }
            $.ajax({
                url: "{{url_for('api.add_to_cart')}}",
                type: "post",
                data: JSON.stringify(data),
                dataType: 'json',
                contentType: 'application/json',
                success: function (result) {
                    Swal.fire(
                        'Added',
                        "Book has been added to your cart",
                        'success'
                    )
                },
                error: function (result) {
                    Swal.fire(
                        'Uh Oh!',
                        result.responseJSON.message,
                        'error'
                    )
                }
            })
        })
        $("#add_to_wishlist").click(function(){
            let data = {
                "guid": "{{book.guid}}"
            }
            $.ajax({
                url: "{{url_for('api.add_to_wishlist')}}",
                type: "post",
                data: JSON.stringify(data),
                dataType: 'json',
                contentType: 'application/json',
                success: function (result) {
                    Swal.fire(
                        'Added',
                        "Book has been added to your wishlist",
                        'success'
                    )
                },
                error: function (result) {
                    Swal.fire(
                        'Uh Oh!',
                        result.responseJSON.message,
                        'error'
                    )
                }
            })
        })
    })

    function choose_plan(plan) {
        let data = {
            plan: plan
        }

        $.ajax({
            url: "{{url_for('api.choose_plan')}}",
            type: "post",
            data: JSON.stringify(data),
            dataType: 'json',
            contentType: 'application/json',
            success: function (result) {
                window.location.href = result.redirect;
            },
            error: function (result) {
                Swal.fire(
                    'Uh Oh!',
                    result.responseJSON.message,
                    'error'
                )
            }
        })
    }
</script>