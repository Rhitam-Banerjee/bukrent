<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Bukrent - Rent Books Online</title>

        <!-- Bootstrap -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
            crossorigin="anonymous"></script>

        <!-- jQuery -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"
            integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

        <!-- Fontawesome -->
        <script src="https://kit.fontawesome.com/b94f5696ce.js" crossorigin="anonymous"></script>

        <!-- Owl Carousel -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" integrity="sha512-tS3S5qG0BlhnQROyJXvNjeEM4UpMXHrQfTGmbQ1gKmelCxlSEBUaxhRBj/EFTzpbP4RVSrpEikbmdJobCvhE3g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.css" integrity="sha512-OTcub78R3msOCtY3Tc6FzeDJ8N9qvQn1Ph49ou13xgA9VsH9+LRxoFU6EqLhW4+PKRfU+/HReXmSZXHEkpYoOA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js" integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

        <!-- Sweet Alert -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/8.11.8/sweetalert2.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/8.11.8/sweetalert2.min.css">

        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@300;400&family=Roboto:wght@100;400&display=swap" rel="stylesheet">

        <style>
            body {
                font-family: 'Roboto', sans-serif;
            }

            .no-desktop {
                display: none;
            }

            .no-mobile {
                display: block;
            }

            .navbar {
                background-color: #FFA142 !important;
                padding: 0px !important;
                padding-left: 10% !important;
            }

            .nav-button {
                background-color: white;
                border: none;
                padding: 0.8em;
                color: #FFA142
            }

            .navbar a {
                color: white;
            }

            #nav_toggler {
                flex-direction: row-reverse;
            }

            .footer-container {
                background-color: #fdcc91 !important;
            }

            .footer-branding {
                background-color: #FFA142 !important;
            }

            .footer-logo {
                width: 50%;
            }

            main {
                margin-top: 74px;
                min-height: 60vh
            }

            .no-decoration {
                color: black;
                text-decoration: none;
            }

            .title-box {
                font-family: 'Comic Neue', cursive;
                background-color: #ffedd6;
                font-size: 2rem;
                font-weight: 900;
                min-height: 125px;
                max-height: 125px;
            }

            .big-title-text {
                color: #ffa142;
                font-size: 4rem;
                font-weight: 900;
            }

            .section-title-box {
                position: relative;
                display: flex;
            }

            .section-title {
                font-size: 2rem;
                font-weight: 900;
                display: inline-block;
                padding: 0rem 1rem;
            }

            .section-title-box::before,
            .section-title-box::after {
                border-top: 1px solid black;
                display: block;
                height: 1px;
                content: " ";
                flex-grow: 1;
                margin-top: 1.5rem;
            }

            .book-img {
                min-height: 25vh;
                max-height: 25vh;
                position: relative;
            }

            .book-name {
                color: #636363;
                font-size: 1rem;
                min-height: 48px;
                max-height: 48px;
                overflow-y: hidden;
            }

            .book-author-name {
                color: #636363;
                min-height: 36px;
                max-height: 36px;
                font-size: 0.75rem;
            }

            .book-rating {
                color: #FFA142;
                font-size: 0.75rem;
            }

            .book-img-container {
                position: relative;
            }

            .overlay {
                position: absolute;
                bottom: 0;
                background: rgb(0, 0, 0);
                background: rgba(0, 0, 0, 0.5);
                width: 90%;
                height: 100%;
                transition: .5s ease;
            }

            .hidden-overlay {
                display: none;
            }

            .add-to-wishlist {
                background-color: #ffcb45;
                color: white;
                width: 30%;
                font-size: 1.5rem;
                position: absolute;
                border: none;
                left: 0;
            }

            .show-details {
                background-color: white;
                color: black;
                width: 30%;
                font-size: 1.5rem;
                right: 0;
                position: absolute;
                border: none;
            }

            .add-to-cart {
                background-color: #ffa142;
                color: white;
                position: absolute;
                font-size: 1rem;
                bottom: 0;
                left: 0;
                width: 100%;
                border: none;
            }

            .blur {
                filter: blur(5px);
                -webkit-filter: blur(5px);
                -moz-filter: blur(5px);
                -o-filter: blur(5px);
                -ms-filter: blur(5px);
            }

            #loader {
                position: fixed;
                display: none;
                align-items: center;
                width: 50%;
                top: 30%;
                left: 35%;
                z-index: 999;
            }

            .loading-gif {
                width: 50%;
                height: auto;
            }

            @media (max-width: 1024px) {
                .navbar {
                    background-color: #FFA142 !important;
                    padding: 0px !important;
                }

                .title-box {
                    font-family: 'Comic Neue', cursive;
                    background-color: #ffedd6;
                    font-size: 1.5rem;
                    font-weight: 900;
                }

                .big-title-text {
                    color: #ffa142;
                    font-size: 3rem;
                    font-weight: 900;
                }

                .book-img {
                    min-height: 15vh;
                    max-height: 15vh;
                    position: relative;
                }

                .book-name {
                    color: #636363;
                    font-size: 1rem;
                    min-height: 48px;
                    max-height: 48px;
                    overflow-y: hidden;
                }

                .book-author-name {
                    color: #636363;
                    min-height: 36px;
                    max-height: 36px;
                    font-size: 0.75rem;
                }

                .book-rating {
                    color: #FFA142;
                    font-size: 0.75rem;
                }

                .overlay {
                    position: absolute;
                    bottom: 0;
                    background: rgb(0, 0, 0);
                    background: rgba(0, 0, 0, 0.5);
                    width: 84%;
                    height: 100%;
                    transition: .5s ease;
                }

                .add-to-wishlist {
                    background-color: #ffcb45;
                    color: white;
                    width: 30%;
                    font-size: 1rem;
                    position: absolute;
                    border: none;
                    left: 0;
                }

                .show-details {
                    background-color: white;
                    color: black;
                    width: 30%;
                    font-size: 1rem;
                    right: 0;
                    position: absolute;
                    border: none;
                }

                .add-to-cart {
                    background-color: #ffa142;
                    color: white;
                    position: absolute;
                    font-size: 0.75rem;
                    bottom: 0;
                    left: 0;
                    width: 100%;
                    border: none;
                }

                #loader {
                    position: fixed;
                    display: none;
                    align-items: center;
                    width: 80%;
                    top: 30%;
                    left: 25%;
                    z-index: 999;
                }

                .loading-gif {
                    width: 60%;
                    height: auto;
                }
            }

            @media (max-width:480px) {
                .no-mobile {
                    display: none;
                }

                .no-desktop {
                    display: block;
                }

                main {
                    margin-top: 138px;
                }

                .nav-button {
                    background-color: #FFA142;
                    border: none;
                    padding-left: 0.8em;
                    color: white;
                }

                .navbar {
                    background-color: #FFA142 !important;
                    padding: 0px !important;
                }

                .section-title {
                    font-size: 1rem;
                    font-weight: 900;
                    display: inline-block;
                    padding: 0rem 0.5rem;
                }

                .section-title-box::before,
                .section-title-box::after {
                    border-top: 1px solid black;
                    display: block;
                    height: 1px;
                    content: " ";
                    flex-grow: 1;
                    margin-top: 0.75rem;
                }

                .book-img {
                    min-height: 17vh;
                    max-height: 17vh;
                    position: relative;
                }

                .book-name {
                    color: #636363;
                    font-size: 1rem;
                    min-height: 48px;
                    max-height: 48px;
                    overflow-y: hidden;
                }

                .book-author-name {
                    color: #636363;
                    min-height: 36px;
                    max-height: 36px;
                    font-size: 0.75rem;
                }

                .book-rating {
                    color: #FFA142;
                    font-size: 0.75rem;
                }

                .overlay {
                    position: absolute;
                    bottom: 0;
                    background: rgb(0, 0, 0);
                    background: rgba(0, 0, 0, 0.5);
                    width: 82%;
                    height: 100%;
                    transition: .5s ease;
                }

                .add-to-wishlist {
                    background-color: #ffcb45;
                    color: white;
                    width: 30%;
                    font-size: 1rem;
                    position: absolute;
                    border: none;
                    left: 0;
                }

                .show-details {
                    background-color: white;
                    color: black;
                    width: 30%;
                    font-size: 1rem;
                    right: 0;
                    position: absolute;
                    border: none;
                }

                .add-to-cart {
                    background-color: #ffa142;
                    color: white;
                    position: absolute;
                    font-size: 0.75rem;
                    bottom: 0;
                    left: 0;
                    width: 100%;
                    border: none;
                }

                #loader {
                    position: fixed;
                    display: none;
                    align-items: center;
                    width: 100%;
                    top: 30%;
                    left: 10%;
                    z-index: 999;
                }

                .loading-gif {
                    width: 80%;
                    height: auto;
                }
            }
        </style>
    </head>
    <body>
        <div class="container-fluid p-0 overflow-hidden main-container">
            <header>
                <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
                    <div class="container-fluid">
                        <a class="navbar-brand" href="https://bukrent.com">
                            <img src="/static/images/logo.png" width="150px" class="img-fluid" />
                        </a>
                        <button class="navbar-toggler text-white" type="button" data-bs-toggle="collapse" data-bs-target="#nav_toggler" aria-controls="nav_toggler" aria-expanded="false" aria-label="Toggle navigation">
                            <i class="fa-solid fa-bars text-white"></i>
                        </button>
                        <div class="d-flex flex-grow-1 pt-3 pb-2">
                            <input id="search" class="form-control me-2" type="search" placeholder="Book, Author, Publisher" aria-label="Search">
                            <button class="nav-button" onclick="search();"><b>Search</b></button>
                        </div>
                        <div class="collapse navbar-collapse" id="nav_toggler">
                            <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
                                {% if current_user %}
                                    <li class="nav-item pt-0 pt-md-0 pt-lg-3">
                                        <a class="nav-link pe-4 ps-3 ps-md-0 ps-lg-0" onclick="logout_user()">
                                            <button class="nav-button"><b>Logout</b></button>
                                        </a>
                                    </li>
                                {% else %}
                                    <li class="nav-item pt-0 pt-md-0 pt-lg-3">
                                        <a class="nav-link pe-4 ps-3 ps-md-0 ps-lg-0" href="{{url_for('views.login')}}">
                                            <b><i class="fa fa-user" aria-hidden="true"></i> Log In / Sign Up</b>
                                        </a>
                                    </li>
                                {% endif %}
                                <!-- <li class="nav-item">
                                    <a class="nav-link pe-4" href="{{url_for('views.home')}}">
                                        Browse Books
                                    </a>
                                </li> -->
                                <!-- <li class="nav-item">
                                    <a class="nav-link pe-4">
                                        <button class="nav-button"><b>Surprise Me</b></button>
                                    </a>
                                </li> -->
                                <li class="nav-item">
                                    <a class="nav-link pe-4" href="{{url_for('views.become_a_subscriber')}}">
                                        <button class="nav-button"><b>Become a subscriber</b></button>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link pe-4 pt-4 ps-3 ps-md-0 ps-lg-0" href="{{url_for('views.cart')}}">
                                        <i class="fa fa-shopping-cart" aria-hidden="true" style="font-size: 1.5em;"></i>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </nav>
            </header>
            <main>
                {% block main %}{% endblock %}
            </main>
            <footer>
                <div class="row footer-container p-3">
                    <div class="col-12 col-md-5 col-lg-5 text-center">
                        <img src="/static/images/logo.png" class="footer-logo" />
                    </div>
                    <div class="col-12 col-sm-7 col-lg-7">
                        <div class="row">
                            <div class="col-12 col-md-4 col-lg-4 mt-0 mt-md-5 mt-lg-5">
                                <b><h3 class="">Get Connected</h3></b>
                                <a class="no-decoration" href="{{url_for('views.about_us')}}"><p class="mt-4">About Us</p></a>
                                <a class="no-decoration" href="{{url_for('views.contact_us')}}"><p>Contact Us</p></a>
                            </div>
                            <div class="col-12 col-md-4 col-lg-4 mt-0 mt-md-5 mt-lg-5">
                                <b><h3 class="">FAQs</h3></b>
                                <a class="no-decoration" href="{{url_for('views.privacy_policy')}}"><p class="mt-4">Privacy Policy</p></a>
                                <a class="no-decoration" href="{{url_for('views.terms_and_conditions')}}"><p>Terms and Conditions</p></a>
                            </div>
                            <div class="col-12 col-md-4 col-lg-4 mt-0 mt-md-5 mt-lg-5">
                                <b><h3 class="">Follow Us</h3></b>
                                <p class="mt-4"><i class="fa-brands fa-instagram"></i> Instagram</p>
                                <p><i class="fa-brands fa-facebook"></i> Facebook</p>
                                <p><i class="fa-brands fa-twitter"></i> Twitter</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row footer-branding">
                    <div class="col-12 col-md-12 col-lg-12 p-3">
                        <h1></h1>
                    </div>
                </div>
            </footer>
        </div>
        <div id="loader">
            <img src="/static/images/loading.gif" class="loading-gif">
        </div>

        <script>
            let current_guid = null;
            let book_number = 1;
            $(function(){
                $("#search").on("keypress", function(event) {
                    if (event.key === "Enter") {
                        event.preventDefault();
                        search();
                    }
                })
            })
            function logout_user() {
                $.ajax({
                    url: "{{url_for('api.logout')}}",
                    type: "post",
                    dataType: 'json',
                    contentType: 'application/json',
                    beforeSend: function(){
                        $('.main-container').addClass('blur');
                        $(':button').prop('disabled', true);
                        $("#loader").show();
                    },
                    success: function (result) {
                        window.location.reload();
                    },
                    error: function (result) {
                        Swal.fire(
                            'Uh Oh!',
                            result.responseJSON.message,
                            'error'
                        )
                    },
                    complete:function(data){
                        $('.main-container').removeClass('blur');
                        $(':button').prop('disabled', false);
                        $("#loader").hide();
                    }
                })
            }

            function search() {
                let url = "{{url_for('views.search_result')}}"+`?query=${$("#search").val()}`
                window.location.href = url
            }

            function create_book_html(book)  {
                let html = `
                            <a onclick="book_clicked('${book.guid}-${book_number}')">
                                <div class="books-box" id="${book.guid}-${book_number}">
                                    <div class="row">
                                        <div class="col-12 col-md-12 col-lg-12 text-center book-img-container">
                                            <img src="${book.image}" class="img-fluid book-img" />
                                            <div class="overlay hidden-overlay">
                                                <button class="add-to-wishlist p-2" onclick="add_to_wishlist('${book.guid}')">
                                                    <i class="fa-regular fa-heart" aria-hidden="true"></i>
                                                </button>
                                                <button class="show-details p-2" onclick="show_details('${book.guid}')">
                                                    <i class="fa fa-info-circle" aria-hidden="true"></i>
                                                </button>
                                                <button class="add-to-cart p-2" onclick="add_to_cart('${book.guid}')">
                                                    <i class="fa fa-shopping-cart" aria-hidden="true"></i> Add to Cart
                                                </button>
                                            </div>
                                        </div>
                                        <div class="col-12 col-md-12 col-lg-12 mt-2">
                                            <p class="book-name">${book.name}</p>
                                        </div>
                                        <div class="col-6 col-md-6 col-lg-6">
                                            <p class="book-author-name">${book.authors[0]}</p>
                                        </div>
                                        <div class="col-6 col-md-6 col-lg-6">
                                            <p class="book-rating"><i class="fa-solid fa-star"></i> ${book.rating}</p>
                                        </div>
                                    </div>
                                </div>
                            </a>
                            `

                book_number++;
                return html
            }

            function book_clicked(guid) {
                if (current_guid) {
                    $(`#${current_guid}`).find("div.overlay").addClass("hidden-overlay")
                }
                current_guid = `${guid}`
                let book_box = $(`#${guid}`).find("div.overlay").toggleClass("hidden-overlay")
            }

            function add_to_cart(guid) {
                let data = {
                    "guid": guid
                }
                $.ajax({
                    url: "{{url_for('api.add_to_cart')}}",
                    type: "post",
                    data: JSON.stringify(data),
                    dataType: 'json',
                    contentType: 'application/json',
                    beforeSend: function(){
                        $('.main-container').addClass('blur');
                        $(':button').prop('disabled', true);
                        $("#loader").show();
                    },
                    success: function (result) {
                        Swal.fire(
                            'Added',
                            "Book has been added to your cart",
                            'success'
                        )
                    },
                    error: function (result) {
                        Swal.fire(
                            'Uh Oh!',
                            result.responseJSON.message,
                            'error'
                        )
                    },
                    complete:function(data){
                        $('.main-container').removeClass('blur');
                        $(':button').prop('disabled', false);
                        $("#loader").hide();
                    }
                })
            }

            function add_to_wishlist(guid) {
                let data = {
                    "guid": guid
                }
                $.ajax({
                    url: "{{url_for('api.add_to_wishlist')}}",
                    type: "post",
                    data: JSON.stringify(data),
                    dataType: 'json',
                    contentType: 'application/json',
                    beforeSend: function(){
                        $('.main-container').addClass('blur');
                        $(':button').prop('disabled', true);
                        $("#loader").show();
                    },
                    success: function (result) {
                        Swal.fire(
                            'Added',
                            "Book has been added to your wishlist",
                            'success'
                        )
                    },
                    error: function (result) {
                        Swal.fire(
                            'Uh Oh!',
                            result.responseJSON.message,
                            'error'
                        )
                    },
                    complete:function(data){
                        $('.main-container').removeClass('blur');
                        $(':button').prop('disabled', false);
                        $("#loader").hide();
                    }
                })
            }

            function show_details(guid) {
                window.location.href=`{{url_for('views.book_details')}}?guid=${guid}`
            }

            function choose_plan(plan) {
                let data = {
                    plan: plan
                }

                $.ajax({
                    url: "{{url_for('api.choose_plan')}}",
                    type: "post",
                    data: JSON.stringify(data),
                    dataType: 'json',
                    contentType: 'application/json',
                    beforeSend: function(){
                        $('.main-container').addClass('blur');
                        $(':button').prop('disabled', true);
                        $("#loader").show();
                    },
                    success: function (result) {
                        window.location.href = result.redirect;
                    },
                    error: function (result) {
                        Swal.fire(
                            'Uh Oh!',
                            result.responseJSON.message,
                            'error'
                        )
                    },
                    complete:function(data){
                        $('.main-container').removeClass('blur');
                        $(':button').prop('disabled', false);
                        $("#loader").hide();
                    }
                })
            }

            function text_short(text) {
                if(text.length > 30) {
                    return text.substring(0, 27) + "...";
                }
                return text
            }
        </script>
    </body>
</html>