{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/bukrent/client/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect } from 'react';\nimport { Navigate, Routes, Route, useLocation } from 'react-router-dom';\nimport Header from './components/Header';\nimport BrowseLibrary from './components/BrowseLibrary';\nimport YourLibrary from './components/YourLibrary';\nimport Footer from './components/Footer';\nimport Book from './components/Book';\nimport Landing from './components/Landing';\nimport Register from './components/Register';\nimport Login from './components/Login';\nimport Preferences from './components/Preferences';\nimport SearchBooks from './components/SearchBooks';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { login, resetAlert } from './reducers/mainSlice';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  var _user$children;\n\n  const {\n    main: {\n      alert,\n      user,\n      isLoggedIn\n    }\n  } = useSelector(state => state);\n  const location = useLocation();\n  const dispatch = useDispatch();\n\n  const refresh = async () => {\n    try {\n      const response = await axios.get('http://localhost:5000/api/get-user', {\n        withCredentials: true\n      });\n      if (response.data.user) dispatch(login({\n        user: response.data.user\n      }));\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  useEffect(() => {\n    refresh();\n  }, []);\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [location]);\n  useEffect(() => {\n    if (alert) setTimeout(() => dispatch(resetAlert()), 3000);\n  }, [dispatch, alert]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [alert.text && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"alert\",\n      style: {\n        backgroundColor: alert.color\n      },\n      children: alert.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Routes, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/book/:guid\",\n        element: /*#__PURE__*/_jsxDEV(Book, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 40\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/browse-library\",\n        element: /*#__PURE__*/_jsxDEV(BrowseLibrary, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 44\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/register\",\n        element: isLoggedIn ? /*#__PURE__*/_jsxDEV(Navigate, {\n          to: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 51\n        }, this) : /*#__PURE__*/_jsxDEV(Register, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 72\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/login\",\n        element: isLoggedIn ? /*#__PURE__*/_jsxDEV(Navigate, {\n          to: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 48\n        }, this) : /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 69\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/your-library\",\n        element: isLoggedIn ? /*#__PURE__*/_jsxDEV(YourLibrary, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 55\n        }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n          to: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 73\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/preferences\",\n        element: (_user$children = user.children) !== null && _user$children !== void 0 && _user$children.length ? /*#__PURE__*/_jsxDEV(Preferences, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 65\n        }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n          to: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 83\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/search-books\",\n        element: /*#__PURE__*/_jsxDEV(SearchBooks, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 42\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        element: /*#__PURE__*/_jsxDEV(Landing, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 30\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 3\n  }, this);\n};\n\n_s(App, \"0H+Yda3FzY7UVCg+4/42zbKZtfY=\", false, function () {\n  return [useSelector, useLocation, useDispatch];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","Navigate","Routes","Route","useLocation","Header","BrowseLibrary","YourLibrary","Footer","Book","Landing","Register","Login","Preferences","SearchBooks","useDispatch","useSelector","login","resetAlert","axios","App","main","alert","user","isLoggedIn","state","location","dispatch","refresh","response","get","withCredentials","data","err","console","log","window","scrollTo","setTimeout","text","backgroundColor","color","children","length"],"sources":["/home/ubuntu/bukrent/client/src/App.js"],"sourcesContent":["import { useEffect } from 'react';\nimport { Navigate, Routes, Route, useLocation } from 'react-router-dom';\nimport Header from './components/Header';\nimport BrowseLibrary from './components/BrowseLibrary';\nimport YourLibrary from './components/YourLibrary';\nimport Footer from './components/Footer';\nimport Book from './components/Book';\nimport Landing from './components/Landing';\nimport Register from './components/Register';\nimport Login from './components/Login';\nimport Preferences from './components/Preferences';\nimport SearchBooks from './components/SearchBooks';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { login, resetAlert } from './reducers/mainSlice';\nimport axios from 'axios';\n\nconst App = () => {\n\tconst { main: { alert, user, isLoggedIn } } = useSelector(state => state);\n\tconst location = useLocation();\n\tconst dispatch = useDispatch();\n\n\tconst refresh = async () => {\n\t\ttry {\n\t\t\tconst response = await axios.get('http://localhost:5000/api/get-user', {withCredentials: true});\n\t\t\tif(response.data.user)\n\t\t\t\tdispatch(login({user: response.data.user}));\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\trefresh();\n\t}, []);\n\n\tuseEffect(\n\t\t() => {\n\t\t\twindow.scrollTo(0, 0);\n\t\t},\n\t\t[ location ]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (alert) setTimeout(() => dispatch(resetAlert()), 3000);\n\t\t},\n\t\t[ dispatch, alert ]\n\t);\n\n\treturn (\n\t\t<div className=\"app\">\n\t\t\t{alert.text && <p className=\"alert\" style={{ backgroundColor: alert.color }}>{alert.text}</p>}\n\t\t\t<Header />\n\t\t\t<Routes>\n\t\t\t\t<Route path=\"/book/:guid\" element={<Book />} />\n\t\t\t\t<Route path=\"/browse-library\" element={<BrowseLibrary />} />\n\t\t\t\t<Route path=\"/register\" element={isLoggedIn ? <Navigate to='/'/> : <Register />} />\n\t\t\t\t<Route path=\"/login\" element={isLoggedIn ? <Navigate to='/'/> : <Login />} />\n\t\t\t\t<Route path=\"/your-library\" element={isLoggedIn ? <YourLibrary /> : <Navigate to='/'/>} />\n\t\t\t\t<Route path=\"/preferences\" element={user.children?.length ? <Preferences /> : <Navigate to='/'/>} />\n\t\t\t\t<Route path=\"/search-books\" element={<SearchBooks />} />\n\t\t\t\t<Route path=\"/\" element={<Landing />} />\n\t\t\t</Routes>\n\t\t\t<Footer />\n\t\t</div>\n\t);\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}