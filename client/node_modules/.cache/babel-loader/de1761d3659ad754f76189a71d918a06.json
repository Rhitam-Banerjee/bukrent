{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/bukrent/client/src/components/Register/OTP/index.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport OTPInput from 'otp-input-react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { nextStepRegister, setAlert, setRegisterDetails } from '../../../reducers/mainSlice';\nimport { FaHourglassEnd } from 'react-icons/fa';\nimport './styles.scss';\nimport axios from 'axios';\nimport devUrls from '../../../utils/devUrls';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst OTP = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const {\n    main: {\n      registerDetails: {\n        otp,\n        otpSent,\n        mobileNumber\n      }\n    }\n  } = useSelector(state => state);\n  const [seconds, setSeconds] = useState(60);\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n\n    try {\n      await axios.post(devUrls.confirmMobileNumber, {\n        otp,\n        mobile_number: mobileNumber\n      }, {\n        withCredentials: true\n      });\n      dispatch(nextStepRegister());\n      dispatch(setRegisterDetails({\n        otpSent: false\n      }));\n    } catch (err) {\n      var _err$response$data;\n\n      dispatch(setAlert({\n        text: (_err$response$data = err.response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message,\n        color: '#F75549'\n      }));\n    }\n  };\n\n  const resendOtp = async () => {\n    try {\n      await axios.post(devUrls.resendOtp, {\n        mobile_number: mobileNumber\n      }, {\n        withCredentials: true\n      });\n      dispatch(setAlert({\n        text: 'OTP resent successfully',\n        color: '#33A200'\n      }));\n      setSeconds(60);\n    } catch (err) {\n      dispatch(setAlert({\n        text: 'Unable to resend OTP, try again later',\n        color: '#F75549'\n      }));\n    }\n  };\n\n  useEffect(() => {\n    if (!otpSent) return navigate('/');\n    const interval = setInterval(() => {\n      if (seconds > 0) setSeconds(_ => _ - 1);\n    }, 1000);\n    return () => {\n      clearInterval(interval);\n    };\n  }, [seconds]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"otp form-container\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"otp-form form\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"OTP\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"otp-field\",\n        children: /*#__PURE__*/_jsxDEV(OTPInput, {\n          value: otp,\n          onChange: newOtp => dispatch(setRegisterDetails({\n            otp: newOtp\n          })),\n          autoFocus: true,\n          OTPLength: 6,\n          otpType: \"number\",\n          disabled: false,\n          secure: false,\n          inputStyles: {\n            width: '3.25rem',\n            height: '3.25rem',\n            margin: '0.5rem'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 5\n      }, this), seconds > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"resend-otp secondary-text\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"secondary-text\",\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: [seconds, \" seconds\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(FaHourglassEnd, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 6\n      }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"button\",\n        value: \"Resend OTP\",\n        onClick: resendOtp,\n        className: \"resend-otp-button\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"gold-button\",\n        onClick: handleSubmit,\n        children: \"Next\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 3\n  }, this);\n};\n\n_s(OTP, \"kzNDtknR1m9WEKJOI9x+sVqEq44=\", false, function () {\n  return [useDispatch, useNavigate, useSelector];\n});\n\n_c = OTP;\nexport default OTP;\n\nvar _c;\n\n$RefreshReg$(_c, \"OTP\");","map":{"version":3,"names":["useState","useEffect","useNavigate","OTPInput","useDispatch","useSelector","nextStepRegister","setAlert","setRegisterDetails","FaHourglassEnd","axios","devUrls","OTP","dispatch","navigate","main","registerDetails","otp","otpSent","mobileNumber","state","seconds","setSeconds","handleSubmit","event","preventDefault","post","confirmMobileNumber","mobile_number","withCredentials","err","text","response","data","message","color","resendOtp","interval","setInterval","_","clearInterval","newOtp","width","height","margin"],"sources":["/home/ubuntu/bukrent/client/src/components/Register/OTP/index.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport OTPInput from 'otp-input-react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { nextStepRegister, setAlert, setRegisterDetails } from '../../../reducers/mainSlice';\nimport { FaHourglassEnd } from 'react-icons/fa';\nimport './styles.scss';\nimport axios from 'axios';\nimport devUrls from '../../../utils/devUrls';\n\nconst OTP = () => {\n\tconst dispatch = useDispatch();\n\tconst navigate = useNavigate();\n\tconst { main: { registerDetails: { otp, otpSent, mobileNumber } } } = useSelector(state => state);\n\tconst [ seconds, setSeconds ] = useState(60);\n\n\tconst handleSubmit = async event => {\n\t\tevent.preventDefault();\n\t\ttry {\n\t\t\tawait axios.post(devUrls.confirmMobileNumber, { otp, mobile_number: mobileNumber }, { withCredentials: true });\n\t\t\tdispatch(nextStepRegister());\n\t\t\tdispatch(setRegisterDetails({ otpSent: false }));\n\t\t} catch (err) {\n\t\t\tdispatch(setAlert({ text: err.response.data?.message, color: '#F75549' }));\n\t\t}\n\t};\n\n\tconst resendOtp = async () => {\n\t\ttry {\n\t\t\tawait axios.post(devUrls.resendOtp, { mobile_number: mobileNumber }, { withCredentials: true });\n\t\t\tdispatch(setAlert({ text: 'OTP resent successfully', color: '#33A200' }));\n\t\t\tsetSeconds(60);\n\t\t} catch (err) {\n\t\t\tdispatch(setAlert({ text: 'Unable to resend OTP, try again later', color: '#F75549' }));\n\t\t}\n\t};\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (!otpSent) return navigate('/');\n\t\t\tconst interval = setInterval(\n\t\t\t\t() => {\n\t\t\t\t\tif (seconds > 0) setSeconds(_ => _ - 1);\n\t\t\t\t},\n\t\t\t\t1000\n\t\t\t);\n\t\t\treturn () => {\n\t\t\t\tclearInterval(interval);\n\t\t\t};\n\t\t},\n\t\t[seconds]\n\t);\n\n\treturn (\n\t\t<div className=\"otp form-container\">\n\t\t\t<form className=\"otp-form form\">\n\t\t\t\t<h2>OTP</h2>\n\t\t\t\t<div className=\"otp-field\">\n\t\t\t\t\t<OTPInput\n\t\t\t\t\t\tvalue={otp}\n\t\t\t\t\t\tonChange={newOtp => dispatch(setRegisterDetails({ otp: newOtp }))}\n\t\t\t\t\t\tautoFocus={true}\n\t\t\t\t\t\tOTPLength={6}\n\t\t\t\t\t\totpType=\"number\"\n\t\t\t\t\t\tdisabled={false}\n\t\t\t\t\t\tsecure={false}\n\t\t\t\t\t\tinputStyles={{ width: '3.25rem', height: '3.25rem', margin: '0.5rem' }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t{seconds > 0 ?\n\t\t\t\t\t<div className=\"resend-otp secondary-text\">\n\t\t\t\t\t\t<p className=\"secondary-text\"><b>{seconds} seconds</b></p>\n\t\t\t\t\t\t<FaHourglassEnd />\n\t\t\t\t\t</div> :\n\t\t\t\t\t<input type='button' value='Resend OTP' onClick={resendOtp} className='resend-otp-button'/>\n\t\t\t\t}\n\t\t\t\t<button type=\"submit\" className=\"gold-button\" onClick={handleSubmit}>Next</button>\n\t\t\t</form>\n\t\t</div>\n\t);\n};\n\nexport default OTP;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}