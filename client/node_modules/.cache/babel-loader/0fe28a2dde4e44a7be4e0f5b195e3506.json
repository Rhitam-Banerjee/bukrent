{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/bukrent/client/src/components/Login/index.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { flushRegisterDetails, setAlert, setRegisterDetails, nextStepRegister, goToStepRegister, login } from '../../reducers/mainSlice';\nimport { AiFillEyeInvisible, AiFillEye } from 'react-icons/ai';\nimport axios from 'axios';\nimport devUrls from '../../utils/devUrls';\nimport { useNavigate } from 'react-router-dom';\nimport { plans } from '../Plans/constants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const {\n    mobileNumber,\n    password\n  } = useSelector(state => state.main.registerDetails);\n  const [showPassword, setShowPassword] = useState(false);\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n\n    try {\n      const response = await axios.post(devUrls.login, {\n        password\n      }, {\n        withCredentials: true\n      });\n\n      if (!response.data.user.plan_id) {\n        navigate('/register');\n        dispatch(nextStepRegister());\n      } else if (!response.data.user.payment_id) {\n        navigate('/register');\n        dispatch(nextStepRegister());\n        dispatch(setRegisterDetails({\n          showPlans: true,\n          selectedPlan: plans.find(plan => plan.razorpayId === response.data.user.plan_id)\n        }));\n      } else if (!response.data.user.addresses.length) {\n        navigate('/register');\n        dispatch(goToStepRegister({\n          i: 2\n        }));\n      } else if (!response.data.user.children.length) {\n        navigate('/register');\n        dispatch(goToStepRegister({\n          i: 3\n        }));\n      } else {\n        navigate('/your-library');\n        dispatch(flushRegisterDetails());\n        dispatch(login({\n          user: response.data.user\n        }));\n      }\n    } catch (err) {\n      dispatch(setAlert({\n        text: err.response.data.message,\n        color: '#F75549'\n      }));\n      console.log(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-container\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"form\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-field\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Mobile Number\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: `+91 - ${mobileNumber}`,\n          readOnly: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-field password-field\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: showPassword ? 'text' : 'password',\n          value: password,\n          onChange: _ref => {\n            let {\n              target: {\n                value\n              }\n            } = _ref;\n            return dispatch(setRegisterDetails({\n              password: value.trim()\n            }));\n          },\n          autoComplete: \"new-password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 6\n        }, this), showPassword ? /*#__PURE__*/_jsxDEV(AiFillEye, {\n          onClick: () => setShowPassword(false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 9\n        }, this) : /*#__PURE__*/_jsxDEV(AiFillEyeInvisible, {\n          onClick: () => setShowPassword(true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"gold-button\",\n        onClick: handleSubmit,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Login, \"EvOJt1ejYSdgkQQay1r6KFCoArM=\", false, function () {\n  return [useNavigate, useDispatch, useSelector];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useState","useDispatch","useSelector","flushRegisterDetails","setAlert","setRegisterDetails","nextStepRegister","goToStepRegister","login","AiFillEyeInvisible","AiFillEye","axios","devUrls","useNavigate","plans","Login","navigate","dispatch","mobileNumber","password","state","main","registerDetails","showPassword","setShowPassword","handleSubmit","event","preventDefault","response","post","withCredentials","data","user","plan_id","payment_id","showPlans","selectedPlan","find","plan","razorpayId","addresses","length","i","children","err","text","message","color","console","log","target","value","trim"],"sources":["/home/ubuntu/bukrent/client/src/components/Login/index.js"],"sourcesContent":["import { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n\tflushRegisterDetails,\n\tsetAlert,\n\tsetRegisterDetails,\n\tnextStepRegister,\n\tgoToStepRegister,\n\tlogin,\n} from '../../reducers/mainSlice';\nimport { AiFillEyeInvisible, AiFillEye } from 'react-icons/ai';\nimport axios from 'axios';\nimport devUrls from '../../utils/devUrls';\nimport { useNavigate } from 'react-router-dom';\nimport { plans } from '../Plans/constants';\n\nconst Login = () => {\n\tconst navigate = useNavigate();\n\tconst dispatch = useDispatch();\n\tconst { mobileNumber, password } = useSelector(state => state.main.registerDetails);\n\tconst [ showPassword, setShowPassword ] = useState(false);\n\n\tconst handleSubmit = async event => {\n\t\tevent.preventDefault();\n\t\ttry {\n\t\t\tconst response = await axios.post(devUrls.login, { password }, { withCredentials: true });\n\t\t\tif (!response.data.user.plan_id) {\n\t\t\t\tnavigate('/register');\n\t\t\t\tdispatch(nextStepRegister());\n\t\t\t} else if (!response.data.user.payment_id) {\n\t\t\t\tnavigate('/register');\n\t\t\t\tdispatch(nextStepRegister());\n\t\t\t\tdispatch(\n\t\t\t\t\tsetRegisterDetails({\n\t\t\t\t\t\tshowPlans: true,\n\t\t\t\t\t\tselectedPlan: plans.find(plan => plan.razorpayId === response.data.user.plan_id),\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t} else if (!response.data.user.addresses.length) {\n\t\t\t\tnavigate('/register');\n\t\t\t\tdispatch(goToStepRegister({i: 2}));\n\t\t\t} else if (!response.data.user.children.length) {\n\t\t\t\tnavigate('/register');\n\t\t\t\tdispatch(goToStepRegister({i: 3}));\n\t\t\t} else {\n\t\t\t\tnavigate('/your-library');\n\t\t\t\tdispatch(flushRegisterDetails());\n\t\t\t\tdispatch(login({ user: response.data.user }));\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tdispatch(setAlert({ text: err.response.data.message, color: '#F75549' }));\n\t\t\tconsole.log(err);\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"form-container\">\n\t\t\t<form className=\"form\">\n\t\t\t\t<h2>Login</h2>\n\t\t\t\t<div className=\"input-field\">\n\t\t\t\t\t<label>Mobile Number</label>\n\t\t\t\t\t<input type=\"text\" value={`+91 - ${mobileNumber}`} readOnly={true} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"input-field password-field\">\n\t\t\t\t\t<label>Password</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype={showPassword ? 'text' : 'password'}\n\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\tonChange={({ target: { value } }) => dispatch(setRegisterDetails({ password: value.trim() }))}\n\t\t\t\t\t\tautoComplete=\"new-password\"\n\t\t\t\t\t/>\n\t\t\t\t\t{showPassword\n\t\t\t\t\t\t? <AiFillEye onClick={() => setShowPassword(false)} />\n\t\t\t\t\t\t: <AiFillEyeInvisible onClick={() => setShowPassword(true)} />}\n\t\t\t\t</div>\n\t\t\t\t<button className=\"gold-button\" onClick={handleSubmit}>Login</button>\n\t\t\t</form>\n\t\t</div>\n\t);\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}