{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nconst initialState = {\n  bucket: [],\n  wishlist: [],\n  suggestedBooks: [],\n  dumpedBooks: [],\n  previousBooks: [],\n  currentBooks: []\n};\nexport const wishlistSlice = createSlice({\n  name: 'wishlist',\n  initialState,\n  reducers: {\n    setBucket: (state, action) => {\n      state.bucket = action.payload.bucket;\n    },\n    setWishlist: (state, action) => {\n      state.wishlist = action.payload.wishlist;\n    },\n    setCurrentBooks: (state, action) => {\n      state.currentBooks = [...new Map(action.payload.currentBooks.map(book => [book.guid, book])).values()];\n    },\n    setDumpedBooks: (state, action) => {\n      state.dumpedBooks = [...new Map(action.payload.dumpedBooks.map(book => [book.guid, book])).values()];\n    },\n    setPreviousBooks: (state, action) => {\n      state.previousBooks = [...new Map(action.payload.previousBooks.map(book => [book.guid, book])).values()];\n    },\n    setSuggestedBooks: (state, action) => {\n      state.suggestedBooks = action.payload.suggestedBooks;\n    },\n    addToWishlist: (state, action) => {\n      state.suggestedBooks = state.suggestedBooks.map(books => {\n        return books.filter(book => book.guid !== action.payload.book.guid);\n      });\n      if (!state.wishlist.find(book => book.guid === action.payload.book.guid)) state.wishlist = [...state.wishlist, action.payload.book];\n    },\n    retainBook: (state, action) => {\n      if (!state.wishlist.find(book => book.guid === action.payload.book.guid)) state.wishlist = [...state.wishlist, action.payload.book];\n    },\n    removeFromBucket: (state, action) => {\n      state.wishlist = state.wishlist.filter(book => book.guid !== action.payload.book.guid);\n      state.wishlist = [...state.wishlist, action.payload.book];\n    },\n    removeFromSuggestedBooks: (state, action) => {\n      state.suggestedBooks = state.suggestedBooks.map(books => {\n        return books.filter(book => book.guid !== action.payload.book.guid);\n      });\n      if (!state.dumpedBooks.find(book => book.guid === action.payload.book.guid)) state.dumpedBooks = [...state.dumpedBooks, action.payload.book];\n    },\n    removeFromWishlist: (state, action) => {\n      state.wishlist = state.wishlist.filter(book => book.guid !== action.payload.book.guid);\n    },\n    addToPreviousBooks: (state, action) => {\n      state.dumpedBooks = state.dumpedBooks.filter(book => book.guid !== action.payload.book.guid);\n      if (!state.previousBooks.find(book => book.guid === action.payload.book.guid)) state.previousBooks = [...state.previousBooks, { ...action.payload.book,\n        userRating: 0\n      }];\n    },\n    ratePreviousBooks: (state, action) => {\n      state.previousBooks = state.previousBooks.map(book => {\n        if (book.guid === action.payload.book.guid) return { ...book,\n          userRating: action.payload.userRating\n        };\n        return book;\n      });\n    },\n    removeFromDump: (state, action) => {\n      state.dumpedBooks = state.dumpedBooks.filter(book => book.guid !== action.payload.book.guid);\n    },\n    decreasePriority: (state, action) => {\n      let wishlist;\n      const i = action.payload.i;\n\n      if (i < state.wishlist.length - 1) {\n        wishlist = state.wishlist.map((book, j) => {\n          if (i === j) return { ...state.wishlist[i + 1]\n          };else if (i + 1 === j) return { ...state.wishlist[i]\n          };\n          return { ...book\n          };\n        });\n      }\n\n      state.wishlist = [...wishlist];\n    },\n    increasePriority: (state, action) => {\n      let wishlist;\n      const i = action.payload.i;\n\n      if (i) {\n        wishlist = state.wishlist.map((book, j) => {\n          if (i === j) return { ...state.wishlist[i - 1]\n          };else if (i - 1 === j) return { ...state.wishlist[i]\n          };\n          return { ...book\n          };\n        });\n      }\n\n      state.wishlist = [...wishlist];\n    }\n  }\n});\nexport const {\n  setBucket,\n  setWishlist,\n  setPreviousBooks,\n  setDumpedBooks,\n  addToWishlist,\n  removeFromWishlist,\n  decreasePriority,\n  increasePriority,\n  addToPreviousBooks,\n  removeFromDump,\n  ratePreviousBooks,\n  setSuggestedBooks,\n  removeFromSuggestedBooks,\n  removeFromBucket,\n  setCurrentBooks,\n  retainBook\n} = wishlistSlice.actions;\nexport default wishlistSlice.reducer;","map":{"version":3,"names":["createSlice","initialState","bucket","wishlist","suggestedBooks","dumpedBooks","previousBooks","currentBooks","wishlistSlice","name","reducers","setBucket","state","action","payload","setWishlist","setCurrentBooks","Map","map","book","guid","values","setDumpedBooks","setPreviousBooks","setSuggestedBooks","addToWishlist","books","filter","find","retainBook","removeFromBucket","removeFromSuggestedBooks","removeFromWishlist","addToPreviousBooks","userRating","ratePreviousBooks","removeFromDump","decreasePriority","i","length","j","increasePriority","actions","reducer"],"sources":["/home/ubuntu/bukrent/client/src/reducers/wishlistSlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\n\nconst initialState = {\n\tbucket: [],\n\twishlist: [],\n\tsuggestedBooks: [],\n\tdumpedBooks: [],\n\tpreviousBooks: [],\n\tcurrentBooks: [],\n};\n\nexport const wishlistSlice = createSlice({\n\tname: 'wishlist',\n\tinitialState,\n\treducers: {\n\t\tsetBucket: (state, action) => {\n\t\t\tstate.bucket = action.payload.bucket;\n\t\t},\n\t\tsetWishlist: (state, action) => {\n\t\t\tstate.wishlist = action.payload.wishlist;\n\t\t},\n\t\tsetCurrentBooks: (state, action) => {\n\t\t\tstate.currentBooks = [ ...new Map(action.payload.currentBooks.map(book => [ book.guid, book ])).values() ];\n\t\t},\n\t\tsetDumpedBooks: (state, action) => {\n\t\t\tstate.dumpedBooks = [ ...new Map(action.payload.dumpedBooks.map(book => [ book.guid, book ])).values() ];\n\t\t},\n\t\tsetPreviousBooks: (state, action) => {\n\t\t\tstate.previousBooks = [ ...new Map(action.payload.previousBooks.map(book => [ book.guid, book ])).values() ];\n\t\t},\n\t\tsetSuggestedBooks: (state, action) => {\n\t\t\tstate.suggestedBooks = action.payload.suggestedBooks;\n\t\t},\n\t\taddToWishlist: (state, action) => {\n\t\t\tstate.suggestedBooks = state.suggestedBooks.map(books => {\n\t\t\t\treturn books.filter(book => book.guid !== action.payload.book.guid);\n\t\t\t});\n\t\t\tif (!state.wishlist.find(book => book.guid === action.payload.book.guid))\n\t\t\t\tstate.wishlist = [ ...state.wishlist, action.payload.book ];\n\t\t},\n\t\tretainBook: (state, action) => {\n\t\t\tif (!state.wishlist.find(book => book.guid === action.payload.book.guid))\n\t\t\t\tstate.wishlist = [ ...state.wishlist, action.payload.book ];\n\t\t},\n\t\tremoveFromBucket: (state, action) => {\n\t\t\tstate.wishlist = state.wishlist.filter(book => book.guid !== action.payload.book.guid);\n\t\t\tstate.wishlist = [ ...state.wishlist, action.payload.book ];\n\t\t},\n\t\tremoveFromSuggestedBooks: (state, action) => {\n\t\t\tstate.suggestedBooks = state.suggestedBooks.map(books => {\n\t\t\t\treturn books.filter(book => book.guid !== action.payload.book.guid);\n\t\t\t});\n\t\t\tif (!state.dumpedBooks.find(book => book.guid === action.payload.book.guid))\n\t\t\t\tstate.dumpedBooks = [ ...state.dumpedBooks, action.payload.book ];\n\t\t},\n\t\tremoveFromWishlist: (state, action) => {\n\t\t\tstate.wishlist = state.wishlist.filter(book => book.guid !== action.payload.book.guid);\n\t\t},\n\t\taddToPreviousBooks: (state, action) => {\n\t\t\tstate.dumpedBooks = state.dumpedBooks.filter(book => book.guid !== action.payload.book.guid);\n\t\t\tif (!state.previousBooks.find(book => book.guid === action.payload.book.guid))\n\t\t\t\tstate.previousBooks = [ ...state.previousBooks, { ...action.payload.book, userRating: 0 } ];\n\t\t},\n\t\tratePreviousBooks: (state, action) => {\n\t\t\tstate.previousBooks = state.previousBooks.map(book => {\n\t\t\t\tif (book.guid === action.payload.book.guid) return { ...book, userRating: action.payload.userRating };\n\t\t\t\treturn book;\n\t\t\t});\n\t\t},\n\t\tremoveFromDump: (state, action) => {\n\t\t\tstate.dumpedBooks = state.dumpedBooks.filter(book => book.guid !== action.payload.book.guid);\n\t\t},\n\t\tdecreasePriority: (state, action) => {\n\t\t\tlet wishlist;\n\t\t\tconst i = action.payload.i;\n\t\t\tif (i < state.wishlist.length - 1) {\n\t\t\t\twishlist = state.wishlist.map((book, j) => {\n\t\t\t\t\tif (i === j) return { ...state.wishlist[i + 1] };\n\t\t\t\t\telse if (i + 1 === j) return { ...state.wishlist[i] };\n\t\t\t\t\treturn { ...book };\n\t\t\t\t});\n\t\t\t}\n\t\t\tstate.wishlist = [ ...wishlist ];\n\t\t},\n\t\tincreasePriority: (state, action) => {\n\t\t\tlet wishlist;\n\t\t\tconst i = action.payload.i;\n\t\t\tif (i) {\n\t\t\t\twishlist = state.wishlist.map((book, j) => {\n\t\t\t\t\tif (i === j) return { ...state.wishlist[i - 1] };\n\t\t\t\t\telse if (i - 1 === j) return { ...state.wishlist[i] };\n\t\t\t\t\treturn { ...book };\n\t\t\t\t});\n\t\t\t}\n\t\t\tstate.wishlist = [ ...wishlist ];\n\t\t},\n\t},\n});\n\nexport const {\n\tsetBucket,\n\tsetWishlist,\n\tsetPreviousBooks,\n\tsetDumpedBooks,\n\taddToWishlist,\n\tremoveFromWishlist,\n\tdecreasePriority,\n\tincreasePriority,\n\taddToPreviousBooks,\n\tremoveFromDump,\n\tratePreviousBooks,\n\tsetSuggestedBooks,\n\tremoveFromSuggestedBooks,\n\tremoveFromBucket,\n\tsetCurrentBooks,\n\tretainBook,\n} = wishlistSlice.actions;\n\nexport default wishlistSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}